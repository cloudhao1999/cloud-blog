(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{365:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"写在开头"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#写在开头"}},[s._v("#")]),s._v(" 写在开头")]),s._v(" "),a("p",[s._v("这篇文章是我阅读了很多其他人的教程和结合自己踩过的坑所作")]),s._v(" "),a("p",[s._v("部分引用：")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/d6f9138fab7b",target:"_blank",rel:"noopener noreferrer"}},[s._v("Django快速部署简约版 v3.0"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/winterking3/article/details/86080434",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ubuntu安装MySQL8.0 允许远程访问"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://ask.csdn.net/questions/698496",target:"_blank",rel:"noopener noreferrer"}},[s._v("Django项目用Nginx部署上线之后，出现图片加载404错误"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/iehadoop/article/details/82961311",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ubuntu 18.04安装MySQL8.0数据库"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/qq_36488647/article/details/100192184",target:"_blank",rel:"noopener noreferrer"}},[s._v("ubuntu18.04 python3.7 pip安装mysqlclient报错ERROR"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/qiang-upc/p/11232630.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("ubuntu18.04 + python3 安装pip3"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"_1-本地项目的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-本地项目的配置"}},[s._v("#")]),s._v(" 1.本地项目的配置")]),s._v(" "),a("h4",{attrs:{id:"注意-命令应该一条一条执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意-命令应该一条一条执行"}},[s._v("#")]),s._v(" 注意：命令应该一条一条执行")]),s._v(" "),a("p",[s._v("本地项目应该反复测试并设置好settings.py配置：")]),s._v(" "),a("p",[a("strong",[s._v("在部署前，我们先修改一下settings.py：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# youliao/youliao/settings.py")]),s._v("\nALLOWED_HOSTS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'你自己的域名'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h5",{attrs:{id:"生成环境包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成环境包"}},[s._v("#")]),s._v(" 生成环境包")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("pip freeze "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" requirements"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("阿里云安全组的配置，也就是打开80和22端口和3306端口")])]),s._v(" "),a("p",[s._v("这部分不懂的照做即可：")]),s._v(" "),a("p",[s._v("购买服务器并配置登录密码以后，在首页点击 控制台>云服务器ECS>（网络与安全）安全组\n没有就创建，有就点配置规则>公网入方向>添加安全组规则，如图所示，我们开放80端口，22端口也是这样打开的（22端口，部署完毕后我们要关掉）。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8zOTgwNTI2LTNmMGYyZTBkMmFiOTFjOTQucG5n?x-oss-process=image/format,png",alt:"img"}})]),s._v(" "),a("p",[s._v("打开80和22端口")]),s._v(" "),a("p",[s._v("登录服务器，阿里云默认登陆就是root，拥有管理员权限，这很重要！如果你没有管理员权限，请在最开始就获取。")]),s._v(" "),a("h3",{attrs:{id:"_2-正式部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-正式部署"}},[s._v("#")]),s._v(" 2.正式部署")]),s._v(" "),a("p",[s._v("系统更新")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("安装python3的pip3包")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" python3-pip\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("安装MySQL(8.x)")]),s._v(" "),a("p",[s._v("首先点击进入"),a("a",{attrs:{href:"https://dev.mysql.com/downloads/repo/apt/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),a("OutboundLink")],1),s._v("，划到底部，下载个deb格式文件")]),s._v(" "),a("p",[s._v("将下载的文件拖拽到ubuntu的桌面，并终端进入桌面\n然后执行如下命令："),a("code",[s._v("sudo dpkg -i mysql-apt-config_0.8.15-1_all.deb")])]),s._v(" "),a("p",[s._v("方向键选mysql-8.0 并按enter键")]),s._v(" "),a("p",[s._v("方向键选择ok 并按enter键")]),s._v(" "),a("p",[s._v("更新apt: "),a("code",[s._v("sudo apt update")])]),s._v(" "),a("p",[s._v("解决提示部分："),a("code",[s._v("sudo apt-get upgrade")])]),s._v(" "),a("p",[s._v("正式安装MySQL18.04："),a("code",[s._v("sudo apt install mysql-server")])]),s._v(" "),a("p",[s._v("上边安装完后，会让你设置root密码，输入后按enter键，并再次确认")]),s._v(" "),a("p",[s._v("MySQL8.0采用了新的加密方式，与Ubuntu18.04有兼容问题；\n故选择下面的旧版本5.x的加密方式")]),s._v(" "),a("p",[s._v("登录输入用户名与密码，看是否安装成功")]),s._v(" "),a("p",[s._v("运行配置向导：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("mysql_secure_installation\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("输入密码回车，回车，回车，然后4次输入Y回车(这个看你自己)。")]),s._v(" "),a("p",[s._v("MYSQL配置文件修改：")]),s._v(" "),a("p",[s._v("如果里面东西很多而不是下面这样的，就不要修改，直接退出。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8zOTgwNTI2LThjY2U1ODMyNjdmZGJkZTIucG5n?x-oss-process=image/format,png",alt:"img"}})]),s._v(" "),a("p",[s._v("正常的样子")]),s._v(" "),a("p",[s._v("如果满足条件，就输入i，在最后一行把下面内容添加到里面，保存退出，vi不会用的同学："),a("a",{attrs:{href:"http://www.cnblogs.com/88999660/articles/1581524.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("linux下vi命令大全"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[client]\nport = 3306\nsocket = /var/lib/mysql/mysql.sock\ndefault-character-set=utf8\n\n[mysqld]\nport = 3306\nsocket = /var/lib/mysql/mysql.sock\ncharacter-set-server=utf8\n\n[mysql]\nno-auto-rehash\ndefault-character-set=utf8\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("重启并连接：")]),s._v(" "),a("div",{staticClass:"language-undefined line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("service mysql restart\nmysql -uroot -p\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("输入密码，再输入以下命令，创建你的数据库：")]),s._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[s._v("CREATE DATABASE "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("`DatabaseName`")]),s._v(" DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("quit命令退出。")]),s._v(" "),a("p",[s._v("如何远程连接数据库？")]),s._v(" "),a("p",[s._v("分别执行以下命令：")]),s._v(" "),a("p",[s._v("添加可以远程访问的账号")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" create user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" identified by "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'你自己的mysql密码'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" grant all privileges on *.* to "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" flush privileges"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("service mysql restart")]),s._v(" "),a("p",[s._v("记得开启阿里云3326的mysql端口，这个也有可能是失败的原因")]),s._v(" "),a("p",[s._v("解决django没法访问数据库：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("create user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" identified by "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'你的密码'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ngrant usage on *.* to "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ngrant all privileges on 你要连接的数据库.* to "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("4.安装项目依赖")]),s._v(" "),a("p",[s._v("首先把你的项目放在你的服务器上（git,ssh都可以）")]),s._v(" "),a("p",[s._v("cd到你的项目")]),s._v(" "),a("p",[s._v("执行安装环境包命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("pip3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" requirements.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果遇到mysql_client安装失败可以进行如下操作：")]),s._v(" "),a("p",[s._v("首先执行命令:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" python3.7-dev libmysqlclient-dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mysqlclient\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("同步数据库，建立管理员账号，同步静态文件：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("python manage.py makemigrations\npython manage.py migrate\npython manage.py createsuperuser\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("然后测试：")]),s._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[s._v("python manage.py runserver 0.0.0.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("80\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("每次执行又强行关闭后，需要杀死端口，否则会被占用，命令如下：")]),s._v(" "),a("div",{staticClass:"language-undefined line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("fuser -k 80/tcp\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果无效，则执行：")]),s._v(" "),a("div",{staticClass:"language-undefined line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("netstat -anp\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看所有端口占用情况，杀死PID就行")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-9")]),s._v(" PID\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("强行退出快捷键：CTRL+C或Z")]),s._v(" "),a("p",[s._v("报错请自行检查项目，访问无问题进行下一步：")]),s._v(" "),a("p",[s._v("安装uWSGI：")]),s._v(" "),a("div",{staticClass:"language-undefined line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("pip install uwsgi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("启动测试：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("uwsgi "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--http")]),s._v(" :80  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--chdir")]),s._v(" /data/youliao/ "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" youliao.wsgi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("报错请自行检查项目，访问无问题进行下一步：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /etc/uwsgi/sites\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/uwsgi/sites\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" youliao.ini\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("填入以下内容：")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[uwsgi]\nproject = youliao\nbase = /data\n\nchdir = %(base)/%(project)\nmodule = %(project).wsgi:application\n\nmaster = true\nprocesses = 5\n\nsocket = %(base)/%(project)/%(project).sock\nchmod-socket = 666\nvacuum = true\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("保存退出，然后是安装Nginx：")]),s._v(" "),a("div",{staticClass:"language-csharp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[s._v("apt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" install nginx\nvi "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sites"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("available"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("youliao\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("填入内容：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    \n    listen "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name 你的域名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    location /static/ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        root /data/youliao/dist"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    location /images/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        root /data/youliao/static"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        include         uwsgi_params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        uwsgi_pass      unix:/data/youliao/youliao.sock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("保存退出，并检测错误！提示ok，那才行！")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /etc/nginx/sites-available/youliao /etc/nginx/sites-enabled/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" nginx configtest\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("重启服务：")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[s._v("service nginx restart\nuwsgi "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("uwsgi"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sites"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("youliao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ini "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("youliao"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("youliao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("如果这时候你的网站已经可以正常浏览使用了，别忘记再在项目中的settings.py中关闭你的Debug：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# youliao/youliao/settings.py")]),s._v("\nDEBUG "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("然后再重启uwsgi。")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("下面是杀死uwsgi进程的方法")]),s._v(" "),a("div",{staticClass:"language-undefined line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ps -ef|grep uwsgi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("看一下PID，杀死就行。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-9")]),s._v(" PID\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("p",[s._v("所有步骤全部完成，关闭22端口！")])])}),[],!1,null,null,null);a.default=n.exports}}]);